# 取り組んだ課題一覧
- 達人に学ぶDB設計徹底指南書
# わかったこと
- ER図はIE(Information Engineering)表記法とIDEFIX表記法の二種が代表的である
- `RAID`(Redundant Array of Independent Disk) 
  複数のディスクを束ねて仮想的に一つのストレージとする、複数のディスクに同じデータを書き込んで冗長化することで内一本壊れても大丈夫だよね的なやつ　
-  DBMSに格納されるおおまかな分類(データファイル, インデックスファイル, システムファイル, 一時ファイル, ログファイル)
-  `リストア` 
   バックアップファイルを戻す
-  `リカバリ` 
   バックアップファイルに対してトランザクションログを適用して変更文を反映させる
-  `ロールフォワード` 
   DBサーバに残っているトランザクションログを反映させる
-  `候補キー`(candidate key) 
   primary keyとして利用可能なkeyが複数存在した場合、それらの候補となるkey
-  `スーパーキー`(super key)  
   primary keyに"keyではないカラム"(非key属）を付加した場合のkeyの組み合わせ
-  `参照整合性制約`　
  外部キー(foreign key)の持つ制約性
-  `カスケード`　
  RDBMSにおいてデータの整合性を維持する制約。例えばカスケード削除が有効な場合、親テーブルが削除されると合わせて子テーブルの関連するレコードも削除される　＝　親子関係の整合性が保たれる
-  SQL上ではNULLは色々な問題を引き起こす厄介なヤツなので、可能な限りNULLを代入しない。　＝ NOT NULL制約など用いる。
-  `スカラ値` 
   単一のセルに単一の値が含まれていること
- `多値従属性`
  従属性がkeyと非keyの間ではなく、keyと集合の間に成立する従属性のこと。

## 正規形 
### コツ
- **コツは異なるエンティティレベル（リレーションシップ）を探し出し1対多にテーブル分割すること**→業務分析の必要性がある
 - **可逆性(INNER JOINで元に戻せる性質)を保存していること**
 - **関連エンティティ(社員とチームのようなエンティティ同士の関係)に含まれる関連は一つだけにすること**
  ![](https://i.gyazo.com/dfaaa176be2c5fd51df86aa38f164f0e.png)
    - 第一正規形
        - `スカラ値`で構成する
        - 重複データを削除する
    - 第二正規形
        - primary keyを構成するすべての列に従属性を持たせる。（`完全関数従属`)
        - `部分関数従属性`（Partial Functional Dependency）を排除する
    - 第三正規形
        - `推移的関数従属`(Transitive Dependency）を排除する
        - 非key属性間の依存関係を取り除く
- `ボイスーコッド正規形`（第３と第４の狭間の正規形)
    第三正規形からさらに非key属性からkey属性への関数従属性を排除し、かつ可逆性を保存した状態にする。
- 高次正規形 (第四正規形・第五正規形)
      - 第四正規形
          - `多値従属性`を持つテーブルを分割し、従属性を取り除く。
      - 第五正規形
          -  [A,B,C]という集合があり、**A→→B|C**の場合、これを[A-B],[A-C]と分解するのが第四正規形だが、新たに[B-C]の関係性(B→→C)が生まれた場合、`多値従属性`が発生するので(A→→B→→CでA→→Cが無いため可逆性の損失)、[A-B],[B-C],[A-C]と分解すること（？)

**ここまでで分かるが正規化を進めるとテーブル数もSQLの結合回数も比例して増えるため、パーフォマンスは落ちる。**

## ER図
### IE
![](https://i.gyazo.com/4f81adc7392517a8b8bcd804457599ac.png)
- 丸( ○ )とか横棒( - )は対応する`カーディナリティ（多重度)`を示す
- ○とか鳥の足みたいなやつはカーディナリティが０及び複数であることを示す
### IDEF1X
![](https://i.gyazo.com/f0ee1f060d1251d2a6f5e3597c1fe93e.png)
- 黒丸( ● ) は**従属entity**であることを示す。
- "●だけ"はカーディナリが"０以上"(IEの鳥の足みたいなあれと類似)、""P"が付く●は"1以上"、"Z"が付く●は"0または１"
    - `従属entity`
    他のテーブルにデータが存在しなければ、データを保持することができないエンティティ
- 尖った四角のやつ( ◇ )もあるが、これは**独立entity**であることを示す。
    - `独立entity`
    他のテーブルのデータに依存することなくデータを保持することのできるエンティティ

- `関連実体(Associative entity)`
    多対多のentityの間につくられる第３の人工的なentity。双方のentityのprimary keyを組み合わせて作るなどすることにより、ER図から多対多の関係を除外する。



# 次やること
- 達人に学ぶDB設計徹底指南書
# 感じたこと
- ボイスーコッド〜第五までやる必要性があるのはもう元本の論理設計がおかしいとしか思えない。普通は第３までで綺麗になるでしょう。
- ER図を実際に書いてみるまで鳥の足生える方がちょっとわからなかった。
### 学習時間

5h ほど
累計:313h
